{"componentChunkName":"component---src-templates-blog-post-js","path":"/2022/study-log/what-happens-when-you-type-wwwnavercom/","result":{"data":{"site":{"siteMetadata":{"title":"woo jeongmin","siteUrl":"https://woojeongmin.com"}},"markdownRemark":{"id":"ad9ec661-2634-5e48-9eb2-b6d413db64f4","excerpt":"What happens when…을 바탕으로 네트워크와 OS, 브라우저에서 일어나는 일을 정리했습니다. URL을 파싱합니다. protocol:  hostname:  resource…","html":"<blockquote>\n<p><a href=\"https://github.com/alex/what-happens-when\">What happens when…</a>을 바탕으로 네트워크와 OS, 브라우저에서 일어나는 일을 정리했습니다.</p>\n</blockquote>\n<h2 id=\"url을-파싱합니다\" style=\"position:relative;\"><a href=\"#url%EC%9D%84-%ED%8C%8C%EC%8B%B1%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"url을 파싱합니다 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>URL을 파싱합니다.</h2>\n<ul>\n<li>protocol: <code class=\"language-text\">http</code></li>\n<li>hostname: <code class=\"language-text\">www.naver.com</code></li>\n<li>resource: <code class=\"language-text\">/</code></li>\n</ul>\n<p>브라우저는 호스트네임에서 <code class=\"language-text\">a-z</code>, <code class=\"language-text\">A-Z</code>, <code class=\"language-text\">0-9</code>, <code class=\"language-text\">-</code>, 혹은 <code class=\"language-text\">.</code>이 아닌 문자들을 확인합니다. (지금의 호스트네임은 <code class=\"language-text\">www.naver.com</code> 이기때문에 유니코드가 없지만, 국제화 도메인 네임과 같이 유니코드가 있을 때에는 브라우저가 URL에서 호스트네임 부분에 <a href=\"https://ko.wikipedia.org/wiki/%ED%93%A8%EB%8B%88%EC%BD%94%EB%93%9C\">퓨니코드 (Punycode)</a> 인코딩을 하기도 합니다. 도메인 주소 뒤 <code class=\"language-text\">/</code> 부터는 특정 문자를 UTF-8로 변환하는 <a href=\"Percent-encoding\">URL escape code</a>를 사용합니다.)</p>\n<h3 id=\"-잠깐-주소인가요-검색어인가요\" style=\"position:relative;\"><a href=\"#-%EC%9E%A0%EA%B9%90-%EC%A3%BC%EC%86%8C%EC%9D%B8%EA%B0%80%EC%9A%94-%EA%B2%80%EC%83%89%EC%96%B4%EC%9D%B8%EA%B0%80%EC%9A%94\" aria-label=\" 잠깐 주소인가요 검색어인가요 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 잠깐! 주소인가요, 검색어인가요?</h3>\n<blockquote>\n<p>프로토콜이나 유효한 도메인 이름이 주어지지 않으면, 브라우저는 주소창에 놓인 텍스트를 브라우저의 기본 웹 검색엔진에 넘겨줍니다.</p>\n</blockquote>\n<h2 id=\"https로-보내야-하나요\" style=\"position:relative;\"><a href=\"#https%EB%A1%9C-%EB%B3%B4%EB%82%B4%EC%95%BC-%ED%95%98%EB%82%98%EC%9A%94\" aria-label=\"https로 보내야 하나요 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTTPS로 보내야 하나요?</h2>\n<p>HSTS 셋은 HTTPS로만 연결되도록 요청한 웹사이트들의 목록입니다. <a href=\"https://caniuse.com/stricttransportsecurity\">브라우저</a>는 이 목록을 조회하여 <code class=\"language-text\">www.naver.com</code>이 목록에 있다면 HTTPS로, 그렇지 않다면 HTTP로 요청을 보냅니다.</p>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 532px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 87.34177215189874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACbElEQVR42o1TyY7aUBDkg3LK9i/5hyiXSLkkl0zyB/mTHBCcGLEZsy9m38E2Y9AEzITVhk5Xz5hlAlEstWy/97q6qrueT9M00rQSlUolMowBZTLv6Pb2BeXzbygcfkWp1GvKZl+Soryl+bxC6zVxrPh7Ljl+v58CgQDnZWi325GPnp79fi+x3bp07XEcl/e3Eo7jkOu6J3uO5AvgarWiYDBIoVCIWYVl4/lzae3SugCikqIopKoq9Xo9Kpc16nY7lEyqHElZu5TsqToNn0c3Go1SIpGgZrNJ8XicIpGIvKvVKvczT7lcjkzTlL4h2u32ocBpoQMgksEQB1OpFDUaDSoWi8K8UqlQoVA4K4SYzWbXAQGWTqdZapcw+U6nI3LBDBOs1WrS6+VyKe/FYiF5p9LPAJ9Lhkz8e4AA+O+hADAWiwkAJAMQfQIoWAN0PB7LP6Sjr9gfDofXGUIeetfv90V+vV5nQ2cF4LF/Ct3djRjYpPv7MVmWyeb+xUDO2XDOJAMIktF4gIAx1vA9Gpn0r+eM4ZrvE5LBEKwgB4PBIB5BFbbMhPv4k2z7Mz08fGeW3/j/K//fsI/1J9Dd8aYADM1HGIbB5i4fBgKjV6tNPvODi3xgS33ivY/M+gsTeM/ni38Dwm9eH2EZSEV4rPP5HDNvsPweg7W5UJ0L6VxI5zZ1mO3vo2R4y5OMaLVawg7AmDL28Na0IoMW+DvJRdJ8VuVW6DQYDKT3tm0fAT02SMQB3BJYCKw9YyNw/dBfuAD7sA7WdF2XVgngZrMRjwEEHgNDXDckYcJYn0wmUgiscS1xxrIsAcT6dDoVyX8AlvDWaIoCSroAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"크롬에 저장된 HSTS 셋\" title=\"크롬에 저장된 HSTS 셋\" src=\"/static/36c26499a2d7ce1c7b0b33128007b2f1/89a37/what-happens-when-hsts.png\" srcset=\"/static/36c26499a2d7ce1c7b0b33128007b2f1/c26ae/what-happens-when-hsts.png 158w,\n/static/36c26499a2d7ce1c7b0b33128007b2f1/6bdcf/what-happens-when-hsts.png 315w,\n/static/36c26499a2d7ce1c7b0b33128007b2f1/89a37/what-happens-when-hsts.png 532w\" sizes=\"(max-width: 532px) 100vw, 532px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n  <figcaption>크롬에 저장된 HSTS 셋</figcaption>\n</figure>\n<h2 id=\"ip-주소를-찾습니다\" style=\"position:relative;\"><a href=\"#ip-%EC%A3%BC%EC%86%8C%EB%A5%BC-%EC%B0%BE%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"ip 주소를 찾습니다 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IP 주소를 찾습니다.</h2>\n<ol>\n<li>이제 브라우저는 <strong>캐시</strong>를 조회하여 해당 웹사이트의 IP 주소를 가지고 있는지 확인합니다.</li>\n<li>요청된 도메인 네임의 IP 주소를 찾을 수 없으면 <code class=\"language-text\">gethostbyname</code> 시스템 라이브러리 함수를 호출해 OS에 IP 주소를 찾도록 요청합니다. OS가 해당 도메인의 IP 주소를 확인하는 첫 번째 위치는 로컬에 위치한 <a href=\"https://en.wikipedia.org/wiki/Hosts_%28file%29#Location_in_the_file_system\">hosts 파일</a>입니다. URL이 hosts 파일 내에서 발견되지 않으면 OS는 웹 페이지의 IP 주소를 찾기 위해 DNS 요청을 합니다.</li>\n<li><code class=\"language-text\">gethostbyname</code>의 캐시 혹은 hosts 파일에서도 IP 주소를 찾지 못하면 OS는 <strong>DNS 서버</strong>에 요청을 보냅니다. 만약 DNS 서버가 같은 서브넷에 있다면 네트워크 라이브러리는 DNS 서버에 대해 ARP 프로세스를 따릅니다. DNS 서버가 다른 서브넷에 있다면 네트워크 라이브러리는 기본 게이트 IP에 대해 ARP 프로세스를 따릅니다.</li>\n</ol>\n<h2 id=\"arp-프로세스\" style=\"position:relative;\"><a href=\"#arp-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\" aria-label=\"arp 프로세스 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARP 프로세스</h2>\n<blockquote>\n<p>ARP(Address Resolution Protocol)는 LAN에서 끊임없이 변화하는 IP 주소를 MAC 주소라고도 하는 고정된 물리적 컴퓨터 주소에 연결하는 프로토콜입니다. MAC 주소는 link 레이어이며 물리적으로 연결된 두 장치 간의 연결을 설정하고 종료하여 데이터 전송이 이루어질 수 있도록 합니다. IP 주소는 network 레이어입니다. ARP는 이러한 OSI 레이어 사이에서 작동합니다.</p>\n</blockquote>\n<p>먼저 ARP 캐시에 목적지 IP의 ARP 항목이 있는지 확인합니다. 만약 캐시에 있다면 시스템 라이브러리 함수는 해당 MAC 주소를 반환합니다.</p>\n<p>항목이 캐시에 없다면 라우트 테이블을 검색해 목적지 IP 주소가 로컬 라우트 테이블의 서브넷에 존재하는지 확인합니다. 존재한다면 그 서브넷에 속하는 인터페이스를 활용하고 없다면 기본 게이트웨이의 서브넷에 속하는 인터페이스를 활용합니다. 선택된 네트워크 인터페이스의 MAC 주소를 검색해 네트워크 라이브러리는 Link 레이어를 통해 ARP 요청을 보냅니다.</p>\n<h3 id=\"arp-request\" style=\"position:relative;\"><a href=\"#arp-request\" aria-label=\"arp request permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARP Request</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Sender MAC: interface:mac:address:here\nSender IP: interface.ip.goes.here\nTarget MAC: FF:FF:FF:FF:FF:FF (Broadcast)\nTarget IP: target.ip.goes.here</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"arp-reply\" style=\"position:relative;\"><a href=\"#arp-reply\" aria-label=\"arp reply permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARP Reply</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Sender MAC: target:mac:address:here\nSender IP: target.ip.goes.here\nTarget MAC: interface:mac:address:here\nTarget IP: interface.ip.goes.here</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"dns-서버에-요청합니다\" style=\"position:relative;\"><a href=\"#dns-%EC%84%9C%EB%B2%84%EC%97%90-%EC%9A%94%EC%B2%AD%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"dns 서버에 요청합니다 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DNS 서버에 요청합니다.</h2>\n<p>이제 네트워크 라이브러리는 우리 DNS 서버나 DNS 프로세스를 재개할 수 있는 기본 게이트웨이 중 하나의 IP 주소를 갖고 있습니다.</p>\n<p>첫 번째 단계는 DNS Resolver가 로컬/ISP 서버에 캐시에 IP 주소를 알고 있는지 확인하도록 요청하는 것입니다. 해당 서버가 정보를 갖고 있지 않다면 재귀적인 탐색이 수행되어 IP 주소가 되돌아올 때까지 DNS 서버 리스트를 타고 올라갑니다.</p>\n<p>DNS Resolver는 루트 네임 서버, .COM_ TLD(Top Level Domain) 네임 서버 순으로 요청합니다. TLD 서버는 요청된 IP 주소가 있는지 확인하기 위해 캐시를 다시 확인합니다. 없다면 해당 URL과 연결된 authoritative DNS 서버로 이동한 후 IP 주소를 반환합니다. 이 과정에서 DNS Resolver는 authoritative 네임 서버에서 받은 정보를 캐시합니다. 클라이언트가 다른 클라이언트가 최근에 요청한 도메인 이름의 IP 주소를 요청하면 Resolver는 네임 서버와의 통신 프로세스를 우회하고 캐시에서 요청한 레코드를 클라이언트에 전달합니다. 이 모든 과정은 밀리초 사이에 이루어집니다.</p>\n<h2 id=\"소켓을-엽니다\" style=\"position:relative;\"><a href=\"#%EC%86%8C%EC%BC%93%EC%9D%84-%EC%97%BD%EB%8B%88%EB%8B%A4\" aria-label=\"소켓을 엽니다 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>소켓을 엽니다.</h2>\n<p>브라우저가 목적지 서버의 IP 주소를 얻게 되면, 주소와 포트 번호(HTTP에서는 기본값 80, HTTPS에서는 기본값 443)를 이용해 시스템 라이브러리 함수를 호출하여 TCP 소켓 스트림을 요청합니다.</p>\n<p>Transport 레이어에서 출발지 포트를 커널의 동적 포트 범위에서 선택하고 목적지 포트를 헤더에 추가합니다. Network 레이어는 출발지와 목적지 서버의 IP 주소 등의 추가적인 IP 헤더를 덧씌워 패킷을 만듭니다. Link 레이어에서는 패킷에 MAC 주소를 포함하여 프레임 헤더를 추가합니다.</p>\n<p>완성된 패킷은 이더넷, 와이파이, 무선 통신 네트워크를 통해 전송됩니다. 출발한 패킷은 모뎀으로 보내져 아날로그 신호로 변환되거나 광케이블 및 다이렉트 이더넷 연결을 통해 디지털 신호로 다음 네트워크 노드까지 전송됩니다.</p>\n<p>로컬 서브넷을 관리하는 라우터에 도착한 패킷은 여러 라우터를 경유하며 목적지 서버까지 여행합니다. 지나치는 각각의 라우터는 IP 헤더로부터 목적지 주소를 추출해 적절한 다음 단계로 이어줍니다. IP 헤더 내의 TTL은 라우터를 하나씩 지날 때마다 감소되어 TTL이 0이 되거나 도달한 라우터의 큐에 자리가 없을 때 패킷은 드랍됩니다.</p>\n<p>이러한 송수신은 TCP를 따라 연결 시 3-way handshake, 종료 시 4-way handshake를 따르며 여러 차례 발생합니다.</p>\n<h2 id=\"tls-handshake\" style=\"position:relative;\"><a href=\"#tls-handshake\" aria-label=\"tls handshake permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TLS handshake</h2>\n<p><img src=\"/6d5000976477d768b10b9537b0d6ec42/what-happens-when-handshake.gif\" alt=\"drake handshake\"></p>\n<p>클라이언트 컴퓨터가 자신의 Transport Layer Security (TLS) 버전, 암호 알고리즘 목록 그리고 사용 가능한 압축 방식을 <code class=\"language-text\">ClientHello</code> 메시지에 담아 서버로 보냅니다. 서버는 클라이언트에게 TLS 버전, 선택한 암호 알고리즘, 선택한 압축 방식 그리고 CA (Certificate Authority) 가 사인한 서버의 공개 인증서를 <code class=\"language-text\">ServerHello</code> 메시지에 담아 답장합니다. 이 인증서는 대칭키가 생성되기 전까지 클라이언트가 나머지 handshake 과정을 암호화하는 데에 쓸 공개키를 담고 있습니다.</p>\n<p>클라이언트는 서버측 디지털 인증서가 유효한지를, 신뢰할 수 있는 CA 목록을 통해 확인합니다. 만약 CA를 통해 신뢰성이 확보되면, 클라이언트는 의사 난수 (pseudo-random) 바이트를 생성해 서버의 공개키로 암호화합니다. 이 난수 바이트는 대칭키를 정하는 데에 사용됩니다. 서버는 난수 바이트를 자기 개인키로 복호화해 대칭 마스터키 생성에 활용합니다.</p>\n<p>클라이언트는 <code class=\"language-text\">Finished</code> 메시지를 서버에 보내면서, 지금까지의 교환 내역을 해시한 값을 대칭키로 암호화하여 담습니다. 서버는 스스로도 해시를 생성해 클라이언트에서 도착한 값과 일치하는지 봅니다. 일치하면, 서버도 마찬가지로 대칭키를 통해 암호화한 <code class=\"language-text\">Finished</code> 메시지를 클라이언트에 보냅니다. 이제부터는 TLS 세션이 대칭키로 암호화된 어플리케이션 (HTTP) 데이터를 전송합니다.</p>\n<h2 id=\"이제-get-요청을-보냅니다\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%A0%9C-get-%EC%9A%94%EC%B2%AD%EC%9D%84-%EB%B3%B4%EB%83%85%EB%8B%88%EB%8B%A4\" aria-label=\"이제 get 요청을 보냅니다 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이제 GET 요청을 보냅니다.</h2>\n<p>구글이 만든 웹 브라우저라면, 페이지를 가져오기 위해 HTTP 요청을 보내는 대신, 서버에게 HTTP에서 <a href=\"https://www.chromium.org/spdy/\">SPDY</a>로 <em>업그레이드</em>할 것을 협상해봅니다.</p>\n<p>만약 클라이언트가 SPDY를 지원하지 않고 HTTP만 쓴다면, 서버에 다음과 같은 GET 요청을 보냅니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">GET / HTTP/1.1\nHost: naver.com\nConnection: close\n[other headers]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>HTTP/1.1은 송신자측에서 응답을 받은 직후에 연결이 끊어질 것이라는 신호를 보내기 위해 “close”라는 연결 옵션을 정의합니다. <code class=\"language-text\">[other headers]</code> 부분은 HTTP 사양에 따라 콜론으로 구분되고 각각 새 줄로 나뉘는 일련의 키-값 쌍을 나타냅니다.</p>\n<p>요청과 헤더를 보낸 후에, 웹 브라우저는 하나의 빈 줄을 서버에 보내 요청 내용이 모두 보내졌음을 알립니다. 서버는 요청의 상태를 나타내는 코드와 다음과 같은 형태의 답신으로 응답합니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">200 OK\ncontent-encoding: gzip\ncontent-type: text/html; charset=UTF-8\ndate: Sun, 04 Sep 2022 21:31:43 GMT\np3p: CP=&quot;CAO DSP CURa ADMa TAIa PSAa OUR LAW STP PHY ONL UNI PUR FIN COM NAV INT DEM STA PRE&quot;\npragma: no-cache\nreferrer-policy: unsafe-url\nserver: NWS\nstrict-transport-security: max-age=63072000; includeSubdomains\nx-frame-options: DENY\nx-xss-protection: 1; mode=block</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>빈 줄을 하나 붙인 뒤, <code class=\"language-text\">www.naver.com</code>의 HTML 본문을 페이로드에 담아 보냅니다. 서버는 곧 연결을 끊거나, 클라이언트가 보낸 헤더에 요청이 있었을 시, 추가적인 요청을 위해 재사용될 수 있도록 연결을 유지해둡니다.</p>\n<h3 id=\"-잠깐-브라우저에-파일이-캐시되어-있나요\" style=\"position:relative;\"><a href=\"#-%EC%9E%A0%EA%B9%90-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%97%90-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%BA%90%EC%8B%9C%EB%90%98%EC%96%B4-%EC%9E%88%EB%82%98%EC%9A%94\" aria-label=\" 잠깐 브라우저에 파일이 캐시되어 있나요 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 잠깐! 브라우저에 파일이 캐시되어 있나요?</h3>\n<blockquote>\n<p>웹 브라우저에서 보낸 HTTP 헤더에, 마지막으로 보냈던 파일이 브라우저에 캐시되어 있고 그 뒤로 변하지 않았다는 판단을 내릴 만큼 충분한 정보 (예를 들어, 웹 브라우저가 ETag 헤더를 포함시켰다든지) 가 담겨 있었다면, <code class=\"language-text\">304 Not Modified</code>로 응답할 수도 있습니다.</p>\n</blockquote>\n<p>HTML을 파싱한 후에는, 브라우저 (그리고 서버) 가 이 과정을 HTML 페이지에서 참조되는 모든 자원 (이미지, CSS, favicon.ico, 기타 등등) 에 대해 반복합니다. HTML이 <code class=\"language-text\">www.naver.com</code> 이 아닌 도메인의 자원을 참조할 땐, 브라우저가 다른 도메인을 확정하는 단계로 되돌아가 해당 도메인에 대해 여기까지의 과정들을 밟습니다.</p>\n<h2 id=\"웹-서버의-요청-처리\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%EC%84%9C%EB%B2%84%EC%9D%98-%EC%9A%94%EC%B2%AD-%EC%B2%98%EB%A6%AC\" aria-label=\"웹 서버의 요청 처리 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 서버의 요청 처리</h2>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.75949367088608%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/0lEQVR42nVSSW/TQBj1b+XICS5cg8QFCSHUQ9UL4oRIqdoQVWoPkbpElFRQWhraJjSr14nHM/bYsZN4VjNOSg9UffoO38y8p295YygldRQPoKRI0ynGGGGcEXKyW+v+cUZuisn8nm/cUZW6T6YLPrT9vgUsxwWeZ9t2hOHWl2bl7X5l7WCv2Y/CIM9pnucGJJcgPJWykEv9bMHeNOwXO6PnnwdtZ6pvqFBcFSQTHpoFkdYoCOF4bBFCjNPbl63BM4T9VS8LocDtwO93AwTdoXu8/omiKxr3ZvPUGtseHrT9pgOsLE90j8aMeQvphjCom/FFkFEmkp9H8e7r7HA9Bh5oVTv1p+7XV1FgeQCboFc9f7d9ttG43uSCGVKUFUMEjyZZGyYIQn0MApwmM0pZIVMMbgqOGWdsyZRKhlG42pHh9LYGVx8wglIqwbnpuh9b2/Vvmxej42kWa8bEhwhHJEkZL33RYoSQYzvlzDG+Cf1fpTXLfS9y/mN4ftJvnJkHWV4uDABgmiaYQLFk6JowgK7rhmFo/G+v+mebKijjOeO+D7mQOsqnQjKRkYjctf3wk6gSpXc6J1TVbpNrlEuuowiS7s7lk++9Zj/oaI5RPIJVeTSX77uLppUmURgRksTxYae2tl/Z+13VXTwqXoFRagIYhNFyjhJCSsqp9knnfwElgpg9/MwUkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"naver web server\" title=\"naver web server\" src=\"/static/14c0e367e88e21b5178796422daf4172/f058b/what-happens-when-naver.png\" srcset=\"/static/14c0e367e88e21b5178796422daf4172/c26ae/what-happens-when-naver.png 158w,\n/static/14c0e367e88e21b5178796422daf4172/6bdcf/what-happens-when-naver.png 315w,\n/static/14c0e367e88e21b5178796422daf4172/f058b/what-happens-when-naver.png 630w,\n/static/14c0e367e88e21b5178796422daf4172/40601/what-happens-when-naver.png 945w,\n/static/14c0e367e88e21b5178796422daf4172/78612/what-happens-when-naver.png 1260w,\n/static/14c0e367e88e21b5178796422daf4172/c1bea/what-happens-when-naver.png 1388w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n  <figcaption><a href=\"https://d2.naver.com/helloworld/6070967\">네이버 메인 페이지의 분산 처리 모델</a></figcaption>\n</figure>\n<blockquote>\n<p>HTTPD (HTTP 데몬) 서버는 서버측에서 요청/응답을 처리하는 친구입니다. 가장 흔한 HTTPD 서버는 리눅스용인 Apache나 nginx 그리고 윈도우용인 IIS가 있습니다. <a href=\"https://d2.naver.com/helloworld/6070967\">2018년 글</a>에 의하면 네이버는 Apache를 사용 중이라고 합니다.</p>\n</blockquote>\n<ul>\n<li>HTTPD가 요청을 수신합니다.</li>\n<li>\n<p>서버는 요청을 메소드, 도메인, 요청된 경로로 파싱합니다.</p>\n<ul>\n<li>method: <code class=\"language-text\">GET</code></li>\n<li>domain: <code class=\"language-text\">naver.com.</code></li>\n<li>path: <code class=\"language-text\">/</code></li>\n</ul>\n</li>\n<li>서버는 <code class=\"language-text\">naver.com</code>에 해당하는 서버에 구성된 가상 호스트가 있는지 확인합니다.</li>\n<li>서버는 <code class=\"language-text\">naver.com</code>이 GET 요청을 수락할 수 있는지 확인합니다.</li>\n<li>서버는 클라이언트가 이 방법을 사용할 수 있는지 확인합니다(IP, 인증 등을 통해).</li>\n<li>서버가 <code class=\"language-text\">index.html</code>과 CSS 및 Javascript 파일을 보냅니다.</li>\n</ul>\n<h2 id=\"브라우저가-문서를-렌더링합니다\" style=\"position:relative;\"><a href=\"#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EA%B0%80-%EB%AC%B8%EC%84%9C%EB%A5%BC-%EB%A0%8C%EB%8D%94%EB%A7%81%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"브라우저가 문서를 렌더링합니다 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>브라우저가 문서를 렌더링합니다.</h2>\n<p><a href=\"https://en.wikipedia.org/wiki/Browser_engine\">렌더링 엔진</a>은 Network 레이어에서 요청된 문서의 내용을 가져오기 시작합니다. 일반적으로 TCP/IP 통신의 경우 8kb chunk로 수행됩니다. 그 후, 렌더링 엔진의 기본 흐름은 다음과 같습니다:</p>\n<ul>\n<li>HTML을 파싱하여 DOM 트리 생성</li>\n<li>스타일 정보와 합쳐 렌더 트리 생성</li>\n<li>렌더 트리 배치</li>\n<li>렌더 트리 그리기</li>\n</ul>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrElEQVR42m2QW0ySARSAz/8jorO0lnaZzS23Htrqoa18ymrNcvXQ1mutdV+5qb1kbW1piSsxMisDLyigMi4lF0XlIj/IRUDuIBdBERAlbeiSVsuyP2itJ8/2vZydfft2wOtFsmZDkEXhNKFvJTqibR0nAADaRmaRe1o/4u0vBphHDh3LS+/AEg6hSzgOK//YcmZmEIhFAKjceuhS2YGhtUH5xWcg10qh+g6vzLOihZqbZPicFsxupsC0lgLLl3Wwp1JbC70+hByeBRqF01hJV1h76UpjXfa54XzppOSxaILLwxwjDZk7zpSvkWfzT3WqHUdZk9PAMniITL2b0DRoQSLxHHQuuoMQjhei4PejgmAAepsHXlYw1PZgJ2Z5/4jaWjThEGMqMy+udw8/kTs10K3zVtNULukbTbSYIpkCtsEBDI0DWsRyiMWJEAhtg+jiToDMKzJwxi6BemEDRG4vsPSOfYwJx22q1FpHV3vL04EIX845zxnjVivMwtNV7cq9bIP7Wq/Odf250FASWSBVBsMF99KFFzIyJANt8ApiXv2BMnTT0IE5T7H0zl9sgxNnTvq4zX28Cswm+j1u4uFKy3DDVSpWNmByf2PqXKlXQ6OXE8uodj6agy8u5xv/Fz7tbwHjUhIsX7/Dg9cMuMXfzL3b5TwwMr+WrbEKcgWYcM87fn+hxi2DM1V0GI1v5MkWVvMMToBPqVIijpdu90UOZoPVUyxzeHd7GaO1N3q0ARvL4FTVtAkOa+xCTGnir+qnxyg4boFuMRc+jPNgLqGA0rMPQRxKgmhm8W/MUrIIfuL7IRgrAZiPkvDQHMnPlN8/2S6z19OUptqOoaHjKquIIcH6mBqX7IQxoASZWUzgKzjIiFEMtWwP8OwhhGMJIE2DAUiskGA5WYDEErvgDwKYfDAReAmdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Webkit 렌더링 파이프라인\" title=\"Webkit 렌더링 파이프라인\" src=\"/static/b2b7c07bd7f5af231cdeaa0c3804a686/39c09/what-happens-when-webkit-flow.png\" srcset=\"/static/b2b7c07bd7f5af231cdeaa0c3804a686/c26ae/what-happens-when-webkit-flow.png 158w,\n/static/b2b7c07bd7f5af231cdeaa0c3804a686/6bdcf/what-happens-when-webkit-flow.png 315w,\n/static/b2b7c07bd7f5af231cdeaa0c3804a686/39c09/what-happens-when-webkit-flow.png 624w\" sizes=\"(max-width: 624px) 100vw, 624px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n  <figcaption>Webkit 기본 흐름</figcaption>\n</figure>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAB3FiwAYn/xAAYEAACAwAAAAAAAAAAAAAAAAAAAhARMf/aAAgBAQABBQKLGFw//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BJ//EABcQAAMBAAAAAAAAAAAAAAAAAAAgMSH/2gAIAQEABj8CphE//8QAGxABAAICAwAAAAAAAAAAAAAAAQARITEQUYH/2gAIAQEAAT8hbvWCmBgZbtN/Tn//2gAMAwEAAgADAAAAEEPP/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARMf/aAAgBAwEBPxA7F//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEVH/2gAIAQIBAT8QWkj2/8QAHRABAAIBBQEAAAAAAAAAAAAAAQARMRAhQXGRsf/aAAgBAQABPxBGlVJshChnIApIMDX5MssHb90//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Gecko 렌더링 파이프라인\" title=\"Gecko 렌더링 파이프라인\" src=\"/static/06086844bde612bd261cb90770573a79/a3695/what-happens-when-gecko-flow.jpg\" srcset=\"/static/06086844bde612bd261cb90770573a79/ff44c/what-happens-when-gecko-flow.jpg 158w,\n/static/06086844bde612bd261cb90770573a79/a6688/what-happens-when-gecko-flow.jpg 315w,\n/static/06086844bde612bd261cb90770573a79/a3695/what-happens-when-gecko-flow.jpg 624w\" sizes=\"(max-width: 624px) 100vw, 624px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n  <figcaption><a href=\"https://wiki.mozilla.org/Gecko:Overview#Document_rendering_pipeline\">Gecko 렌더링 파이프라인</a></figcaption>\n</figure>\n<h3 id=\"html-파싱\" style=\"position:relative;\"><a href=\"#html-%ED%8C%8C%EC%8B%B1\" aria-label=\"html 파싱 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTML 파싱</h3>\n<p>파서는 문자 스트림을 트리 구조로 변환하는 일을 합니다. HTML 문서는 <a href=\"https://www.w3.org/TR/2011/WD-html5-20110113/parsing.html\">HTML5 스펙</a>의 파싱 알고리즘을 구현한 HTML 파서에 의해 파싱됩니다. 알고리즘은 토큰화 및 트리 구성의 두 단계로 구성됩니다.</p>\n<figure>\n  <img src=\"/8b87f1d362701006ef10b710a975f011/what-happens-when-parsing-model-overview.svg\" alt=\"Overview of the parsing model\">\n  <figcaption><a href=\"https://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#overview-of-the-parsing-model\">Overview of the parsing model</a></figcaption>\n</figure>\n<p>토큰화를 통해 입력은 구문 분석 후 토큰으로 파싱됩니다. Lexer라고도 부르는 <a href=\"https://www.w3.org/TR/2011/WD-html5-20110113/tokenization.html\">Tokenizer</a>는 입력이 끝날 때까지 토큰을 생성해 트리 생성기에 전달합니다.</p>\n<p>구문 분석이 완료되면 브라우저는 페이지에 연결된 외부 리소스를 가져오기 시작합니다. 이때 브라우저는 해당 문서가 상호작용 중이라는 표시를 해두고 <code class=\"language-text\">deferred</code> 모드에 있는 스크립트를 파싱하기 시작합니다. 그 후 문서의 상태는 <code class=\"language-text\">complete</code>로 표시되고 <code class=\"language-text\">load</code> 이벤트가 트리거됩니다.</p>\n<h3 id=\"css-해석\" style=\"position:relative;\"><a href=\"#css-%ED%95%B4%EC%84%9D\" aria-label=\"css 해석 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS 해석</h3>\n<p><code class=\"language-text\">&lt;style&gt;</code> 태그 내용과 <code class=\"language-text\">style</code> 속성값으로 되어있는 외부 CSS 파일들을 <a href=\"https://www.w3.org/TR/CSS2/grammar.html\">“CSS lexical and syntax grammar”</a>를 활용해 파싱합니다. 각각의 CSS 파일은 <code class=\"language-text\">Stylesheet object</code>로 파싱되는데, 각 객체는 selector 및 CSS 문법에 해당하는 객체들과 함께 CSS 규칙들을 담고 있습니다.</p>\n<h3 id=\"페이지-렌더링\" style=\"position:relative;\"><a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A0%8C%EB%8D%94%EB%A7%81\" aria-label=\"페이지 렌더링 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>페이지 렌더링</h3>\n<ul>\n<li>DOM 노드를 순회하며 각 노드의 CSS 스타일 값을 계산하여 프레임 트리(혹은 렌더 트리)를 생성합니다.</li>\n<li>자식 노드들의 너비를 더해 ‘프레임 트리’ 내 각 노드의 선별된 너비를 거꾸로 계산하고 그 노드의 수평 여백, 경계, 그리고 패딩도 계산합니다.\n각 노드가 사용 가능한 너비를 자식들에게 할당하면서 위에서 아래로 실제 너비를 계산합니다.\n문자 래핑을 적용하고 자식 노드의 높이, 그리고 노드의 여백, 경계, 패딩을 더해 각 노드의 높이를 거꾸로 계산합니다.\n각 노드의 좌표를 위에서 계산된 정보를 통해 뽑아냅니다.\n더 복잡한 과정은 요소들이 float 이거나, absolutely 혹은 relatively 으로 위치해있을 때처럼 다른 복잡한 특성이 쓰일 때 일어납니다. <a href=\"http://dev.w3.org/csswg/css2/\">http://dev.w3.org/csswg/css2/</a> 와 <a href=\"http://www.w3.org/Style/CSS/current-work\">http://www.w3.org/Style/CSS/current-work</a> 에서 더 자세한 정보를 확인하세요.\n레이어를 만들어 페이지 내 어떤 부분이 그룹으로 애니메이션화 될 수 있도록 다시-래스터화 되지 않는지 서술합니다. 각 프레임/렌더 객체는 레이어에 배정됩니다.\n페이지의 각 레이어를 위해 텍스쳐가 할당됩니다.\n각 레이어의 프레임/렌더 객체를 가로지르며 해당 레이어의 그리기 명령이 실행됩니다. 이 과정은 CPU에 의해 래스터화 하거나 D2D/SkiaGL을 활용해 GPU에 직접 그리기도 합니다.\n위의 모든 과정은 최근에 웹 페이지가 렌더링될 때 계산된 값을 재활용 할 수 있어서, 이후의 변화에 대해서는 적은 노력이 듭니다.\n페이지 레이어는 합성 과정으로 넘어가고 거기에서 크롬 브라우저나 iframe 그리고 애드온과 같은 다른 시각 요소들과 합쳐집니다.\n마지막 레이어 위치가 계산되고 합성 명령이 Direct3D/OpenGL 등을 통해 발행됩니다. GPU 명령 버퍼는 비동기적 렌더링을 위해 비워지고 프레임은 윈도우 서버로 전송됩니다.</li>\n</ul>\n<h3 id=\"gpu-렌더링\" style=\"position:relative;\"><a href=\"#gpu-%EB%A0%8C%EB%8D%94%EB%A7%81\" aria-label=\"gpu 렌더링 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GPU 렌더링</h3>\n<p>렌더링 과정에서 그래픽 처리 연산 레이어는 GPU가 담당하기도 합니다. 그래픽 렌더링 연산을 위해 GPU를 사용할 때는 그래픽 담당 소프트웨어 레이어가 작업을 여러 조각으로 쪼개어 GPU의 부동 소수점 연산 병렬처리를 통해 렌더링을 돕습니다.</p>\n<h2 id=\"생각해보기\" style=\"position:relative;\"><a href=\"#%EC%83%9D%EA%B0%81%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"생각해보기 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>생각해보기</h2>\n<ul>\n<li>도메인 네임, 호스트 네임, url의 차이는 무엇일까요?</li>\n<li>응답의 상태코드가 40X나 50X라면 어떤 일이 일어날까요?</li>\n</ul>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://github.com/alex/what-happens-when\">What happens when…</a></li>\n<li><a href=\"https://www.linkedin.com/pulse/what-happens-when-you-type-googlecom-any-other-url-buitrago-vargas/\">What Happens When You Type google.com Or Any Other URL In Your Browser And Press Enter</a></li>\n<li><a href=\"https://www.cloudflare.com/ko-kr/learning/dns/dns-server-types/\">DNS server types</a></li>\n<li><a href=\"http://taligarsiel.com/Projects/howbrowserswork1.html\">Behind the scenes of modern web browsers</a></li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#url%EC%9D%84-%ED%8C%8C%EC%8B%B1%ED%95%A9%EB%8B%88%EB%8B%A4\">URL을 파싱합니다.</a></p>\n<ul>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#-%EC%9E%A0%EA%B9%90-%EC%A3%BC%EC%86%8C%EC%9D%B8%EA%B0%80%EC%9A%94-%EA%B2%80%EC%83%89%EC%96%B4%EC%9D%B8%EA%B0%80%EC%9A%94\">🤔 잠깐! 주소인가요, 검색어인가요?</a></li>\n</ul>\n</li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#https%EB%A1%9C-%EB%B3%B4%EB%82%B4%EC%95%BC-%ED%95%98%EB%82%98%EC%9A%94\">HTTPS로 보내야 하나요?</a></li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#ip-%EC%A3%BC%EC%86%8C%EB%A5%BC-%EC%B0%BE%EC%8A%B5%EB%8B%88%EB%8B%A4\">IP 주소를 찾습니다.</a></li>\n<li>\n<p><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#arp-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\">ARP 프로세스</a></p>\n<ul>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#arp-request\">ARP Request</a></li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#arp-reply\">ARP Reply</a></li>\n</ul>\n</li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#dns-%EC%84%9C%EB%B2%84%EC%97%90-%EC%9A%94%EC%B2%AD%ED%95%A9%EB%8B%88%EB%8B%A4\">DNS 서버에 요청합니다.</a></li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#%EC%86%8C%EC%BC%93%EC%9D%84-%EC%97%BD%EB%8B%88%EB%8B%A4\">소켓을 엽니다.</a></li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#tls-handshake\">TLS handshake</a></li>\n<li>\n<p><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#%EC%9D%B4%EC%A0%9C-get-%EC%9A%94%EC%B2%AD%EC%9D%84-%EB%B3%B4%EB%83%85%EB%8B%88%EB%8B%A4\">이제 GET 요청을 보냅니다.</a></p>\n<ul>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#-%EC%9E%A0%EA%B9%90-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%97%90-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%BA%90%EC%8B%9C%EB%90%98%EC%96%B4-%EC%9E%88%EB%82%98%EC%9A%94\">🤔 잠깐! 브라우저에 파일이 캐시되어 있나요?</a></li>\n</ul>\n</li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#%EC%9B%B9-%EC%84%9C%EB%B2%84%EC%9D%98-%EC%9A%94%EC%B2%AD-%EC%B2%98%EB%A6%AC\">웹 서버의 요청 처리</a></li>\n<li>\n<p><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EA%B0%80-%EB%AC%B8%EC%84%9C%EB%A5%BC-%EB%A0%8C%EB%8D%94%EB%A7%81%ED%95%A9%EB%8B%88%EB%8B%A4\">브라우저가 문서를 렌더링합니다.</a></p>\n<ul>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#html-%ED%8C%8C%EC%8B%B1\">HTML 파싱</a></li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#css-%ED%95%B4%EC%84%9D\">CSS 해석</a></li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A0%8C%EB%8D%94%EB%A7%81\">페이지 렌더링</a></li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#gpu-%EB%A0%8C%EB%8D%94%EB%A7%81\">GPU 렌더링</a></li>\n</ul>\n</li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#%EC%83%9D%EA%B0%81%ED%95%B4%EB%B3%B4%EA%B8%B0\">생각해보기</a></li>\n<li><a href=\"/2022/study-log/what-happens-when-you-type-wwwnavercom/#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>","frontmatter":{"title":"브라우저 주소창에 www.naver.com을 치면 일어나는 일","date":"September 05, 2022","description":null,"tags":["network","browser"],"cover":null}},"previous":{"fields":{"slug":"/2022/study-log/useeffect-uselayouteffect/"},"frontmatter":{"title":"useEffect와 useLayoutEffect: effect 바르게 쓰기"}},"next":null},"pageContext":{"id":"ad9ec661-2634-5e48-9eb2-b6d413db64f4","previousPostId":"91af680a-90ee-5541-8276-7e352b13dfd6","nextPostId":null}},"staticQueryHashes":["1152384417","2706681444","3540528984"]}