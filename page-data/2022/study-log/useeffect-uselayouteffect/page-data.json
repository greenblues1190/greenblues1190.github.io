{"componentChunkName":"component---src-templates-blog-post-js","path":"/2022/study-log/useeffect-uselayouteffect/","result":{"data":{"site":{"siteMetadata":{"title":"woo jeongmin","siteUrl":"https://woojeongmin.com"}},"markdownRemark":{"id":"91af680a-90ee-5541-8276-7e352b13dfd6","excerpt":"useEffect? useLayoutEffect? 공식문서를 읽어보자. useEffect - Effect Hook을 사용하면 함수 컴포넌트에서 side effect를 수행할 수 있습니다. useLayoutEffect - 이 함수의 시그니처는 useEffect와 동일하긴 한데… side…","html":"<h2 id=\"useeffect-uselayouteffect\" style=\"position:relative;\"><a href=\"#useeffect-uselayouteffect\" aria-label=\"useeffect uselayouteffect permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect? useLayoutEffect?</h2>\n<p>공식문서를 읽어보자.</p>\n<blockquote>\n<p><a href=\"https://ko.reactjs.org/docs/hooks-effect.html\">useEffect - Effect Hook을 사용하면 함수 컴포넌트에서 side effect를 수행할 수 있습니다.</a></p>\n<p><a href=\"https://ko.reactjs.org/docs/hooks-reference.html#uselayouteffect\">useLayoutEffect - 이 함수의 시그니처는 useEffect와 동일하긴 한데…</a></p>\n</blockquote>\n<p>side effect란 함수가 받은 인자 외에 외부에서 함수의 출력에 영향을 주는 모든 상태 변경을 의미한다. 예를 들어 함수의 내부에서 <code class=\"language-text\">Math.random()</code>, <code class=\"language-text\">Date.now()</code>를 사용하여 실행할 때마다 결과가 달라지는 것이 대표적인 side effect이다. 그 외에도 함수 내부에서 인자로 받지 않은 외부의 상태를 참조하거나 API로 서버의 데이터를 가져오는 등의 작업도 side effect에 포함된다.</p>\n<p>useEffect와 useLayoutEffect 모두 컴포넌트에서 side effect가 있는 작업을 수행할 때 사용할 수 있다.</p>\n<h2 id=\"차이점\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"차이점 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차이점</h2>\n<p>useEffect와 useLayoutEffect의 차이는 실행 시점과 동작 방식(동기/비동기)에 있다. useEffect 훅은 컴포넌트 렌더링과 브라우저 페인팅이 끝난 후 비동기적으로 실행된다. 반면 useLayoutEffect 훅은 컴포넌트 렌더링 후 동기적으로 실행되어 작업이 완료되면 브라우저 페인팅이 시작된다. useLayoutEffect의 실행 시점과 동작 방식은 <code class=\"language-text\">componentDidMount</code>, <code class=\"language-text\">componentDidUpdate</code>의 스케쥴링과 동일하다.</p>\n<h3 id=\"hook-flow-비교\" style=\"position:relative;\"><a href=\"#hook-flow-%EB%B9%84%EA%B5%90\" aria-label=\"hook flow 비교 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hook flow 비교</h3>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 127.21518987341773%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEPklEQVQ4y21VW1PiShDO//8NPvhildY+WGfXLd0VTlkinl1EQAWEhEtALknkEhJynSTf6R6Jcjw7qa++np6ezvTMdI8CammaMmEwGODw8BBHR0e4urrC2dkZTk5OUCwWcX5+jtPTU5RKJRwcHEib4+Nj1Go15D6yLIOCXcud5i0IAhiGgfF4jPl8jpeXFwmWWe+6rnTA83Jn3JRc+NxY/6exzz/+PEfJJ3K4jNlsJvtJkkgjXkm/30en08FyuXx36vs+dF2XGA6HWCwWbyvMvTefmqhUKlBVVfZzh2xYvinLPR2Pxu8Ova2HRr2Ber2Ou7s7TCaTN4dxEiMS4cey6WNdEPkQifhfWKyL4/iPISdpAmW00FG4u0SxUkChcolvV1/x458LPE/acMMttju4gfvO9taGEzjY+BvYno2Nt4HjO3JMsRwLw9cB9Nch+mYPQ2tA/aHsmxsDlmNibI2gG299w55j5S4RxAG8yIMXepJ9ioihTO0pupaK3msPmoQm5Y7RkehaXZQeb2j1BbRnbTyTbraeyclu6MpVMcvVEysp7YcIAySE2PdI9pFEIUJvCxH4yOJIIiUdc0LjMd3RjO8fHVwiBLGQMkOJBj0EtSrChzr8+j2CRk2C+5PrK7S+n6Ff+Imnb1/RuTiHev4dIV32lK5N4rgQjoOErlYOJbHXEKYBYZmIiWMpWwinE2w6bdjPLazbTayaT3h9eoTdbiEYj6QNz4uMOWKCME0JJY0oDPpbSmHE2y0Sz0MaRohWK+i0QrVYkKz9XUC3cInnyx/Y3FcRPTYQUBTBQ+MDpFPEbIpI7SLqawi1LsKeiqinIVA72Dw9YFb5hdnvXxjeXEMvl7Ck7Ylo9QmHytGt18T2O5R4OkVIaRVRhoQ7sBx0u7Ape+Z3VUx+V6Df3mJQLmNBmRFTcUh9OkiKSLgUFWVNDko9vvWcKXSSGZ3qTk4Sb6fnbImljpJO6oQIOC8orRLKeyGR95XMayOzr5FtbgllCThlJOsShs1TqPUvkru1L9Bbf0GrnyB2NfK9RSbWSOM1sU3/tSUrtAnIIoMWYdJhGDvZooN6Qeo9w18+wFs2sDHv4Vg1uhotOjhyGFKhCEcUuo4s0KWcEZQspQvL4aW0BzEVTbElmS/6K1K3gWmviBe1gIlWwLB9AX9RQercU12rIttD3leyoE8CGWzrxDVCXcrCJiOvBs+6hTksYqJewDVpO7ZViG2ftmxDYS4p5CUtYkXySrKSRVNkfpdqvkasSrAs3I5kf9XEYlqFMfoN22wAZCuCGUXhk1MXqaCoEoqKwKx81EGuZ1zGd6U++5D/U+b3xqScZu92mSywVByyLN0z3+d9N/v4NJZ9QOH3otVqySrMZT+iVBRUQXJwn8dyzm34VWTkD1n+Nin82HQpKxiapkn0ej0J/hk/XDzGbw2PsY6Zn1J+UvNXMHf8L5hDXb6yva7gAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"hook-flow\" title=\"hook-flow\" src=\"/static/79cedcfa3c684fae0975a3df306a7b80/f058b/hook-flow.png\" srcset=\"/static/79cedcfa3c684fae0975a3df306a7b80/c26ae/hook-flow.png 158w,\n/static/79cedcfa3c684fae0975a3df306a7b80/6bdcf/hook-flow.png 315w,\n/static/79cedcfa3c684fae0975a3df306a7b80/f058b/hook-flow.png 630w,\n/static/79cedcfa3c684fae0975a3df306a7b80/8c857/hook-flow.png 761w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n  <figcaption><a href=\"https://github.com/donavon/hook-flow\">hook flow</a></figcaption>\n</figure>\n<h4 id=\"useeffect\" style=\"position:relative;\"><a href=\"#useeffect\" aria-label=\"useeffect permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect</h4>\n<ol>\n<li>리액트 앱에서 렌더링이 트리거 됨 (dependency 수정됨)</li>\n<li><strong>리액트가 컴포넌트를 렌더링함</strong></li>\n<li><strong>브라우저가 화면을 새로 그림</strong></li>\n<li>useEffect가 백그라운드에서 실행됨</li>\n<li>useEffect 안에서 DOM 노드 ref를 조작함</li>\n<li>리렌더링, 이펙트가 DOM을 수정하는 동안 잠시 화면이 빔.</li>\n<li>브라우저가 화면을 새로 그림</li>\n</ol>\n<h4 id=\"uselayouteffect\" style=\"position:relative;\"><a href=\"#uselayouteffect\" aria-label=\"uselayouteffect permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useLayoutEffect</h4>\n<ol>\n<li>리액트 앱에서 렌더링이 트리거 됨 (dependency 수정됨)</li>\n<li><strong>리액트가 컴포넌트를 렌더링함</strong></li>\n<li>useLayoutEffect가 실행됨</li>\n<li>useLayoutEffect가 끝나기를 기다림</li>\n<li><strong>브라우저가 화면을 새로 그림</strong></li>\n</ol>\n<h2 id=\"uselayouteffect-언제-써야-하나\" style=\"position:relative;\"><a href=\"#uselayouteffect-%EC%96%B8%EC%A0%9C-%EC%8D%A8%EC%95%BC-%ED%95%98%EB%82%98\" aria-label=\"uselayouteffect 언제 써야 하나 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useLayoutEffect, 언제 써야 하나</h2>\n<p>브라우저 페인트 전 DOM 조작, 혹은 레이아웃 정보를 읽어야 할 때</p>\n<ol>\n<li>스크롤 위치 확인</li>\n<li>화면이 깜빡이는 상황</li>\n<li>그 외: ref가 업데이트 되기 전 이전 값 확인</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  ref<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token string\">\"some value\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 다른 hook 등에서 다음 실행</span>\n<span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token comment\">// &lt;-- 이전 값 로그</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"생각해보기\" style=\"position:relative;\"><a href=\"#%EC%83%9D%EA%B0%81%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"생각해보기 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>생각해보기</h2>\n<details>\n  <summary>\n    데이터 fetching은 어디서 하는게 좋을까?\n  </summary>\n<blockquote>\n<p>useLayoutEffect가 useEffect 전에 실행된다고..? 그럼 useLayoutEffect에서 데이터 fetching을 하면 더 빨리 받겠네?? 🤔</p>\n</blockquote>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.291139240506325%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8ElEQVQ4y42T6XKbMBSF/SZpHZsdBEIgFgHeYuzWbX91pn3/Bzk9CBJ7pkmnP765c7Uc6W4r8+uMyBQIqhx+JeHpzFpfT2T/Ce+VAvFwwUp/3yOsC6h+QHe6wpwuaI8j1DBA9D2ipoZfULzI/6bM3/a8IkPcUdANJbZBhmdPYOOl2Pgzk//spQvifdyHM26MQI9YnS9XVGYP1R5RDyNkNcAXJUJZw41yPG1CfHYifNpGDzZGpgfkzR5eXNjza64FJQXXVN6GGQoK6u6FgjsrmhHVHLh+oN2jNCekZQdZ7yjWL35vxWeiWdB+lyFOYW8DCYe/ci1qsXeccELOlv50fk5RxnSJOWSpaijdIlEdglTfL9jckvBjHs96sUJUXbEKBVsmZrWEhsvF14RPr95/+hH3aDxqhJOgl5RslRvM8Yb28JWt8w3D+Qd0P9pw1m6CNR+w9l+85tAJclS8XLEpVXtCYV6smKz2NtlPm8BWeuK1wmsneYelyolpsIkFtnGKJG8sgWTbqJKV7lGw0jkrK1lZwVz7UsERTIeQd1LmMkkRNmzs7vfIDi8hTIXuesHuxvC/jMh2LeRgkA+dtbI3SLual9TDeC6jZ0c2nUev+XlC1JZ2HsNaITaa40a/5KuFeMO1pJzZjMjFZg8+BfsL/gAUnJg+bWYycAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"review\" title=\"review\" src=\"/static/3d3bb5ca8abac5a48383f53736d4c7f8/f058b/useeffect-uselayouteffect-review.png\" srcset=\"/static/3d3bb5ca8abac5a48383f53736d4c7f8/c26ae/useeffect-uselayouteffect-review.png 158w,\n/static/3d3bb5ca8abac5a48383f53736d4c7f8/6bdcf/useeffect-uselayouteffect-review.png 315w,\n/static/3d3bb5ca8abac5a48383f53736d4c7f8/f058b/useeffect-uselayouteffect-review.png 630w,\n/static/3d3bb5ca8abac5a48383f53736d4c7f8/40601/useeffect-uselayouteffect-review.png 945w,\n/static/3d3bb5ca8abac5a48383f53736d4c7f8/525d3/useeffect-uselayouteffect-review.png 1090w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n  <figcaption>아...</figcaption>\n</figure>\n<p>문제는 useLayoutEffect가 동기적이라는 것이다. useLayoutEffect가 실행되는 동안 브라우저 페인팅을 블로킹하면서 웹앱이 일시중지된다. 이펙트 내부에 느린 작업이 있는 경우 버벅임과 같은 성능 이슈를 발생시킬 수 있다.</p>\n<p><strong>즉, 더 빠른 데이터 fetching에서 얻는 이점 &#x3C; 브라우저 페인팅이 블로킹되면서 생기는 성능 이슈</strong></p>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.75949367088608%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjUlEQVQozw3N21KiYAAAYN5wn6Cd2Z3aaZpqalZS5Fh5LLXQEJAfEBBEEQTkIGCCbm3tTbMXPdDu9wIfZMOpX8kDNJexZwbNuWquVrchsouQfVQtEjJPqSKu7nx8OxuHuu/prq/HwZSOXTKD1Ku1gT37RGHjG4vIfWoXEbsU20foPr0p3qXXd/F3Sv0KrwtLDI1kpW8iwwvmZjqrZtAIiRgi0m82AbVJ63nWKOLG1gWJ10pCJH9+2CX3WwcJrfJqzkdze20Z6eIxseqxWU6hCWwPMNBDRKbCS5im4mYfYQdPI+lOmyDWoMQNr8CwLHRKjzyuyOSUq0pa2QalqVGOIL3i0VVWoFQRVWaYO6dcGZmIiCrAqoRobFkUShpAJwKqAFQXSJ0nRInwu6WZXIkg/34zJyMLjY2KOyU89lIbHqshViyRxMbWSyrzyY13vU4HuV1LrOvYoVIVTUZXK+X/nMpblbYF3sJrXWZqzDZJs8aD0mxeCXTY08urVT/eay/PoNiK+6CT23i+vH6xsFwthVAoJSyrK2kwiQOsPxg6C8FzOM16qPdo8ohrHEtE0+fDCMR2x9PKcw02H3880ofi5CqGnGbePZPbQ1k3aHGAqY459lysdvuEni6f8FRtj+Bj5MsBuLy1xxPujKAPTxL29v77kUyOobtzZSAt+lOz0WuyNMnIgBuPxnU0o2t7ubVXWm+gy11cmEw/Wy9XtjFETjOhJcPHTz/rUFuasVkYff7tMnUYPQWrpRI4C4V5nXOZVI85PAO9xhkq9nraXUPttkeVbyb2dYqe82cj6MFfMVHkfPwxikjPw/jzw3l76QB2NupubJDaoit0TLrNU1hoiO4ELLnaK3Pu4gfiCfwP5LG3otMrtWsAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"did you think\" title=\"did you think\" src=\"/static/a10ccc9138cc033fea39db8ffb8e1200/01e7c/useeffect-uselayouteffect-did-you-think.png\" srcset=\"/static/a10ccc9138cc033fea39db8ffb8e1200/c26ae/useeffect-uselayouteffect-did-you-think.png 158w,\n/static/a10ccc9138cc033fea39db8ffb8e1200/6bdcf/useeffect-uselayouteffect-did-you-think.png 315w,\n/static/a10ccc9138cc033fea39db8ffb8e1200/01e7c/useeffect-uselayouteffect-did-you-think.png 512w\" sizes=\"(max-width: 512px) 100vw, 512px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n  <figcaption>아니요</figcaption>\n</figure>\n</details>\n<h2 id=\"uselayouteffect와-ssr\" style=\"position:relative;\"><a href=\"#uselayouteffect%EC%99%80-ssr\" aria-label=\"uselayouteffect와 ssr permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useLayoutEffect와 SSR</h2>\n<blockquote>\n<p><em>Warning: useLayoutEffect does nothing on the server because its effect cannot be encoded into the server renderer’s output format…</em></p>\n</blockquote>\n<p>When dealing with SSR, both useEffect &#x26; useLayoutEffect won’t work unless that JavaScript has been properly loaded. Therefore, there’s the above warning we might see in the console. The reason why it doesn’t generate with <code class=\"language-text\">useEffect</code> is, it is not concerned with the render cycle of the component unlike <code class=\"language-text\">useLayoutEffect</code> is concerned and cares what users would see on the very first render of the component.</p>\n<p><a href=\"https://gist.github.com/gaearon/e7d97cdf38a2907924ea12e4ebdf3c85\">React Community</a> suggests two ways to fix this,</p>\n<p><strong>1.</strong> Of course, the first thing we can do is to try to convert it to a <code class=\"language-text\">useEffect</code> hook if possible.</p>\n<p><strong>2.</strong> If there is a flickering issue with the <code class=\"language-text\">useEffect</code> (as we discussed earlier ) and developers do need <code class=\"language-text\">useLayoutEffect</code>, then another way could be delaying that very component that uses the hook until the JavaScript has been loaded. Another way of saying, lazily load the React Component.</p>","tableOfContents":"<ul>\n<li><a href=\"/2022/study-log/useeffect-uselayouteffect/#useeffect-uselayouteffect\">useEffect? useLayoutEffect?</a></li>\n<li>\n<p><a href=\"/2022/study-log/useeffect-uselayouteffect/#%EC%B0%A8%EC%9D%B4%EC%A0%90\">차이점</a></p>\n<ul>\n<li>\n<p><a href=\"/2022/study-log/useeffect-uselayouteffect/#hook-flow-%EB%B9%84%EA%B5%90\">hook flow 비교</a></p>\n<ul>\n<li><a href=\"/2022/study-log/useeffect-uselayouteffect/#useeffect\">useEffect</a></li>\n<li><a href=\"/2022/study-log/useeffect-uselayouteffect/#uselayouteffect\">useLayoutEffect</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/2022/study-log/useeffect-uselayouteffect/#uselayouteffect-%EC%96%B8%EC%A0%9C-%EC%8D%A8%EC%95%BC-%ED%95%98%EB%82%98\">useLayoutEffect, 언제 써야 하나</a></li>\n<li><a href=\"/2022/study-log/useeffect-uselayouteffect/#%EC%83%9D%EA%B0%81%ED%95%B4%EB%B3%B4%EA%B8%B0\">생각해보기</a></li>\n<li><a href=\"/2022/study-log/useeffect-uselayouteffect/#uselayouteffect%EC%99%80-ssr\">useLayoutEffect와 SSR</a></li>\n</ul>","frontmatter":{"title":"useEffect와 useLayoutEffect: effect 바르게 쓰기","date":"May 24, 2022","description":null,"tags":["react"],"cover":null}},"previous":{"fields":{"slug":"/2022/retrospective/weekly-8/"},"frontmatter":{"title":"주간회고 #8 - 컴포넌트 "}},"next":null},"pageContext":{"id":"91af680a-90ee-5541-8276-7e352b13dfd6","previousPostId":"259edfc2-1cf7-5905-ab10-3c0c338cb366","nextPostId":null}},"staticQueryHashes":["1152384417","2706681444","3540528984"]}