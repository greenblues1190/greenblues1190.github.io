{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021/error-log/20210125/","result":{"data":{"site":{"siteMetadata":{"title":"Woo, Jeongmin"}},"markdownRemark":{"id":"517c0d6c-dfb9-5ddb-be64-c055dac5631e","excerpt":"블로그를 만들기 위해 gatsby-cli를 설치..하려 했으나 설치에서부터 문제에 봉착 이것은 M1맥과 같이 애플 실리콘 기반 디바이스에서 발생하는 문제로 node.js 15.3.0에서 해결되었다. 업데이트 후 다시 npx gatsby-cli new gatsby-example…","html":"<p>블로그를 만들기 위해 gatsby-cli를 설치..하려 했으나</p>\n<p>설치에서부터 문제에 봉착</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span></span><span class=\"token operator\">&lt;</span>--- JS stacktrace ---<span class=\"token operator\">></span>\n\nFATAL ERROR: wasm code commit Allocation failed - process out of memory\n <span class=\"token number\">1</span>: 0x100b4e9d8 node::Abort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>/Users/woojeongmin/.nvm/versions/node/v14.15.4/bin/node<span class=\"token punctuation\">]</span>\n <span class=\"token number\">2</span>: 0x100b4eb58 node::errors::TryCatchScope::~TryCatchScope<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>/Users/woojeongmin/.nvm/versions/node/v14.15.4/bin/node<span class=\"token punctuation\">]</span>\n <span class=\"token number\">3</span>: 0x100c68384 v8::Utils::ReportOOMFailure<span class=\"token punctuation\">(</span>v8::internal::Isolate*, char const*, bool<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>/Users/woojeongmin/.nvm/versions/node/v14.15.4/bin/node<span class=\"token punctuation\">]</span>\n \n <span class=\"token punctuation\">..</span>.\n \n <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">16407</span> abort      npx gatsby-cli new gatsby-example</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이것은 M1맥과 같이 애플 실리콘 기반 디바이스에서 발생하는 문제로 <a href=\"https://nodejs.org/ko/blog/release/v15.3.0/\">node.js 15.3.0</a>에서 해결되었다.</p>\n<p>업데이트 후 다시 npx gatsby-cli new gatsby-example 로 설치..하려 했으나</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span></span>code <span class=\"token number\">1</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> path /Users/woojeongmin/Projects/gatsby-example/node_modules/sharp\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> <span class=\"token builtin class-name\">command</span> failed\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> <span class=\"token builtin class-name\">command</span> <span class=\"token function\">sh</span> -c <span class=\"token punctuation\">(</span>node install/libvips <span class=\"token operator\">&amp;&amp;</span> node install/dll-copy <span class=\"token operator\">&amp;&amp;</span> prebuild-install --runtime<span class=\"token operator\">=</span>napi<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>node-gyp rebuild <span class=\"token operator\">&amp;&amp;</span> node install/dll-copy<span class=\"token punctuation\">)</span>\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> CC<span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> Release/obj.target/nothing/<span class=\"token punctuation\">..</span>/node-addon-api/nothing.o\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>   LIBTOOL-STATIC Release/nothing.a\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>   TOUCH Release/obj.target/libvips-cpp.stamp\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span>   CXX<span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> Release/obj.target/sharp/src/common.o\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> info sharp Downloading https://github.com/lovell/sharp-libvips/releases/download/v8.9.1/libvips-8.9.1-darwin-arm64v8.tar.gz\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> ERR<span class=\"token operator\">!</span> sharp Prebuilt libvips <span class=\"token number\">8.9</span>.1 binaries are not yet available <span class=\"token keyword\">for</span> darwin-arm64v8\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> info sharp Attempting to build from <span class=\"token builtin class-name\">source</span> via node-gyp but this may fail due to the above error\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> info sharp Please see https://sharp.pixelplumbing.com/install <span class=\"token keyword\">for</span> required dependencies</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>libvips가 arm64를 지원하지 않아 실패</p>\n<p><a href=\"https://github.com/lovell/sharp/issues/2460#issuecomment-751491241\">다행히 최근에 애플 실리콘 네이티브를 지원하게 되었다고 한다.</a></p>\n<p>brew reinstall vips 로 다시 설치해주면</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span></span>Your new Gatsby site has been successfully bootstrapped. Start developing it by running:\n\n  <span class=\"token builtin class-name\">cd</span> gatsby-example\n  gatsby develop</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>설치 성공</p>\n<p>나와 같은 상황인 사람이 있어서 처음으로 <a href=\"https://stackoverflow.com/questions/65856300/wasm-code-commit-allocation-failed-process-out-of-memory/65874139#65874139\">스택오버플로우 답변</a>을 올렸다.</p>","frontmatter":{"title":"wasm code commit Allocation failed - process out of memory 에러","date":"January 25, 2021","description":null,"tags":["Gatsby","Node.js"]}},"previous":{"fields":{"slug":"/2021/how-to-install-homebrew-on-m1-mac/"},"frontmatter":{"title":"애플 실리콘 맥 Homebrew 설치 방법"}},"next":{"fields":{"slug":"/2021/gatsby-blog/0/"},"frontmatter":{"title":"Gatsby 블로그 개발 일지 - 0. Gatsby 시작하기"}}},"pageContext":{"id":"517c0d6c-dfb9-5ddb-be64-c055dac5631e","previousPostId":"823fe317-c6b1-563c-b594-db9c4f9d514c","nextPostId":"75eac604-9274-5a76-adcf-418ff99bca89"}},"staticQueryHashes":["2841359383","3518605037"]}